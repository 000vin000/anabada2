# 하브루타노트(강수연)

---

| **훈련과정** | 자바&Springboot 크로스 플랫폼(풀스택)융합 응용SW개발자 양성과정 |
| --- | --- |
| **훈련기간** | 2024.10.28~2025.04.18 |
| **훈련교사** | 박민 |
| **프로젝트 유형** | 팀(협동) |
| **팀원** | 김정빈(팀장), 강수연, 정민지, 정현의, 이동욱, 한혜진 |
| **프로젝트 기간** | 2025.03.14 ~ 2025.04.18 |
| **프로젝트명** | 개인간의 의류 경매 플랫폼 |

---

| 맡은 임무 | 유저 신고하기 기능 |
| --- | --- |
| 작성일 | 2025.04.16 |
| 훈련생명 | 강수연 |

---

### 1. 작업이해도

사용자가 유저 프로필, 채팅창, 상품 상세 페이지에서 부적절한 내용을 발견했을 때 신고할 수 있도록 구현<br>
신고된 내용은 관리자 페이지에서 확인할 수 있으며, 관리자는 이를 확인 후 경고 / 일정 기간 정지 / 영구 정지 등으로 처리

### 2. 작업계획

- 유저 신고 기능을 사용자 접근이 용이한 위치(유저 프로필, 채팅창, 상품 상세 페이지)에 각각 버튼 형태로 배치
- 신고 버튼 클릭 시, 신고 사유를 선택하거나 입력할 수 있는 팝업 창 구현
- 입력된 신고 내용은 서버로 전송되어 데이터베이스에 저장, 관리자 페이지에서 목록으로 확인 가능하도록 설계
- 관리자 페이지에서는 신고된 유저의 정보, 신고 사유, 신고 일시 등을 테이블 형태로 확인 가능
  (관리자 권한으로 '경고', '일시 정지', '영구 정지'를 선택하도록 구성)
- 사용자 인터페이스는 직관적이고 간결하게 구성하여 누구나 쉽게 신고 기능을 사용할 수 있도록 설계

### 3. 관찰기록

신고 기능 구현 중, 영구 정지 처리된 유저의 상태를 WITHDRAWN으로 변경하려는 과정에서 java.sql.SQLException: Data truncated for column 'user_status' at row 1 예외가 발생했다.
원인은 USER 테이블 생성 시 user_status 컬럼의 길이가 명시되지 않아, 기본적으로 매우 짧은 크기(VARCHAR(1) 등)로 설정되었을 가능성이 컸다.
이로 인해 Enum 값 중 상대적으로 문자열 길이가 긴 WITHDRAWN을 저장하려 할 때, 데이터가 잘려 저장되면서 예외가 발생한 것이다.

문제 해결을 위해 User 엔티티 내 userStatus 필드에 @Enumerated(EnumType.STRING)과 함께 @Column(length = 20)을 명시하여 충분한 컬럼 크기를 확보하였다.
그 결과, Enum 값이 정상적으로 저장되며 예외 없이 회원 상태 변경 로직이 작동되었다.

### 4. 본인의견

이번 경험을 통해 Enum 타입을 사용할 때도 데이터베이스 컬럼의 길이를 명확히 지정해주는 것이 중요하다는 점을 배웠다. 단순히 코드상에서 Enum을 설정하는 것만으로는 충분하지 않고, DB 구조와 매핑 방식까지 함께 고려해야 오류를 예방할 수 있다는 사실을 직접 체감했다.
예외 메시지를 기반으로 원인을 추적하고, 코드와 DB 구조를 함께 점검하며 문제를 해결하는 과정을 통해 단순한 디버깅을 넘어 구조적인 문제 해결 능력을 키울 수 있었다. 특히, 오류 발생 원인을 정확히 진단하고 적절한 어노테이션과 컬럼 설정으로 대응한 경험은, 실무에서 발생할 수 있는 데이터 매핑 문제에도 빠르게 대처할 수 있는 기반이 되었다.
